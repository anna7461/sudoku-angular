/* You can add global styles to this file, and also import other style files */
@use "./app/sudoku/styles/buttons";
@use "./app/sudoku/variables" as vars;

/* Global scroll behavior */
html {
  scroll-behavior: smooth;
}

html, body {
  scroll-behavior: smooth;
  overflow-x: hidden; /* Prevent horizontal scrolling */
}

/* Scroll utility classes */
.scroll-to-top {
  scroll-behavior: smooth;
}

.scroll-to-top-instant {
  scroll-behavior: auto;
}

/* Ensure proper scroll behavior on all scrollable elements */
* {
  scroll-behavior: inherit;
}

/* Accessibility Improvements */
* {
  /* Ensure focus indicators are always visible */
  &:focus-visible {
    outline: 2px solid var(--color-focus-ring, #3b82f6);
    outline-offset: 2px;
    border-radius: 2px;
  }
}

/* Improved focus styles for interactive elements */
button, input, select, textarea, [tabindex] {
  &:focus-visible {
    outline: 2px solid var(--color-focus-ring, #3b82f6);
    outline-offset: 2px;
    border-radius: 4px;
    box-shadow: 0 0 0 4px var(--color-focus-ring-light, rgba(59, 130, 246, 0.3));
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --color-primary: #0000ff;
    --color-text-darkest: #000000;
    --color-text-dark: #000000;
    --color-bg-white: #ffffff;
    --color-border-darkest: #000000;
    --color-focus-ring: #000000;
    --color-focus-ring-light: rgba(0, 0, 0, 0.5);
  }

  * {
    &:focus-visible {
      outline: 3px solid #000000;
      outline-offset: 1px;
    }
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Mobile-specific global styles */
@media (max-width: 768px) {
  html, body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  * {
    -webkit-tap-highlight-color: transparent;
  }

  button, input, select, textarea {
    font-size: 16px !important; /* Prevents zoom on iOS */
  }
}

@media (max-width: 480px) {
  html, body {
    font-size: 14px;
  }
}

/* CSS Variables for Theme System - Default (Classic Blue) with Accessibility Improvements */
:root {
  /* Primary Colors */
  --color-primary: #3d55cc;
  --color-primary-hover: #324ab8;
  --color-primary-light: rgba(61, 85, 204, 0.1);

  /* Text Colors */
  --color-text-darkest: #141a33;
  --color-text-dark: #505673;
  --color-text-medium: #878ca8;
  --color-text-light: #dadef2;
  --color-text-lightest: #f5f6fa;
  --color-text-white: #ffffff;

  /* Background Colors */
  --color-bg-white: #ffffff;
  --color-bg-lightest: #f5f6fa;
  --color-bg-light: #dadef2;
  --color-bg-medium: #878ca8;
  --color-bg-dark: #505673;
  --color-bg-darkest: #141a33;

  /* Border Colors */
  --color-border-light: #dadef2;
  --color-border-medium: #878ca8;
  --color-border-dark: #505673;
  --color-border-darkest: #141a33;

  /* State Colors */
  --color-warning: #d97706;
  --color-warning-light: rgba(217, 119, 6, 0.12);
  --color-info: #2563eb;
  --color-info-light: rgba(37, 99, 235, 0.12);
  --color-danger: #dc2626;
  --color-danger-light: rgba(220, 38, 38, 0.12);
  --color-success: #059669;
  --color-success-light: rgba(5, 150, 105, 0.12);

  /* Game-specific Colors */
  --color-cell-fixed: var(--color-text-darkest);
  --color-cell-selected: var(--color-primary);
  --color-cell-selected-text: var(--color-text-lightest);
  --color-cell-correct: var(--color-success);
  --color-cell-error: var(--color-danger);
  --color-cell-highlighted: rgba(37, 99, 235, 0.08);
  --color-cell-highlighted-border: rgba(37, 99, 235, 0.25);
  --color-cell-number-highlighted: var(--color-primary);
  --color-cell-notes: var(--color-text-medium);

  /* Message Colors */
  --color-victory-text: #047857;
  --color-victory-bg: #ecfdf5;
  --color-victory-border: #047857;
  --color-game-over-text: #b91c1c;
  --color-game-over-bg: #fef2f2;
  --color-game-over-border: #b91c1c;

  /* Hover & Focus States */
  --color-hover-transform: translateY(-1px);
  --color-button-hover-bg: var(--color-bg-lightest);
  --color-button-disabled-opacity: 0.6;

  /* Shadows */
  --shadow-default: 0 2px 4px rgba(0, 0, 0, 0.1);
  --shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.15);
  --shadow-primary: 0 4px 12px rgba(37, 99, 235, 0.25);

  /* Theme-specific Colors */
  --theme-accent: #dbeafe;
  --theme-text-secondary: #475569;
  --color-disabled-bg: #9ca3af;

  /* Accessibility Colors */
  --color-focus-ring: #3b82f6;
  --color-focus-ring-light: rgba(59, 130, 246, 0.3);
}

/* Generate all theme variations using SASS maps and loops */
@each $theme-name, $theme-colors in vars.$themes {
  @include vars.generate-theme-variables($theme-name, $theme-colors);
}

/* Additional theme-specific overrides that can't be easily mapped */
body.theme-warm-sand {
  /* Game-specific Colors */
  --color-cell-fixed: var(--color-text-darkest);
  --color-cell-selected-text: var(--color-text-darkest);
}

body.theme-dark-mode {
  /* Game-specific Colors */
  --color-cell-fixed: var(--color-text-white);
  --color-cell-selected: var(--color-primary);
  --color-cell-selected-text: var(--color-text-white);
  --color-cell-correct: var(--color-success);
  --color-cell-error: var(--color-danger);
  --color-cell-number-highlighted: var(--color-primary);
  --color-cell-notes: var(--color-text-medium);
}

/* High contrast mode overrides for dark theme */
@media (prefers-contrast: high) {
  body.theme-dark-mode {
    --color-primary: #ffffff;
    --color-text-darkest: #ffffff;
    --color-text-dark: #ffffff;
    --color-bg-white: #000000;
    --color-border-darkest: #ffffff;
    --color-focus-ring: #ffffff;
    --color-focus-ring-light: rgba(255, 255, 255, 0.5);
  }
}

body {
  margin: 0;
  font-family: "Source Sans 3", sans-serif;
  box-sizing: border-box;
  /* Ensure sufficient color contrast */
  color: var(--color-text-darkest);
  background-color: var(--color-bg-white);
  line-height: 1.5;
}

/* Accessibility improvements for text */
h1, h2, h3, h4, h5, h6 {
  color: var(--color-text-darkest);
  line-height: 1.2;
}

/* Ensure links have sufficient contrast */
a {
  color: var(--color-primary);
  text-decoration: underline;

  &:hover {
    color: var(--color-primary-hover);
    text-decoration-thickness: 2px;
  }

  &:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
    border-radius: 2px;
  }
}
