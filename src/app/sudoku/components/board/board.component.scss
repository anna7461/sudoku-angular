.board {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  border: 1px solid var(--color-border-darkest);
  width: fit-content;

  &.disabled {
    opacity: var(--color-button-disabled-opacity);
    pointer-events: none;

    .cell {
      cursor: not-allowed;
    }
  }
}

.box {
  display: grid;
  grid-template-columns: repeat(3, 50px);
  grid-template-rows: repeat(3, 50px);
  border: 1px solid var(--color-border-darkest);
}

.cell {
  position: relative;
  border: 1px solid var(--color-border-light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  cursor: pointer;
  user-select: none;
  font-weight: bold;

  :host-context(.theme-dark-mode) {
    background-color: var(--color-bg-white);
  }

  &.fixed {
    color: var(--color-cell-fixed);
  }

  &.selected {
    background-color: var(--color-cell-selected);
    color: var(--color-cell-selected-text);
  }

  &.correct {
    color: var(--color-cell-correct);
    background-color: transparent;

    .main-number {
      // color: var(--color-cell-correct) !important;
    }
  }

  &.error {
    color: var(--color-cell-error);
    background-color: transparent;

    .main-number {
      color: var(--color-cell-error) !important;
    }
  }

  &.fixed-selected {
    background-color: var(--color-cell-highlighted);
    border: 2px solid var(--color-border-darkest);
    color: var(--color-cell-fixed);
    position: relative;

    &:hover {
      background-color: var(--color-cell-highlighted-border);
    }
  }

  &.number-highlighted {
    background-color: var(--color-cell-number-highlighted);
    color: var(--color-cell-selected-text);

    .main-number {
      // Additional styling if needed
    }

    .note {
      color: var(--color-warning);
      font-weight: bold;
    }
  }



  &.related-highlighted {
    background-color: var(--color-cell-highlighted);
    border: 1px solid var(--color-cell-highlighted-border);
  }

  &.current-number-highlighted {
    background-color: var(--color-primary);
    color: var(--color-cell-selected-text);

    .note {
      color: var(--color-success);
      font-weight: bold;
    }
  }

  // Override related highlighting for selected cell
  &.selected.related-highlighted {
    background-color: var(--color-primary);
    border: 2px solid var(--color-primary);
  }

  // Override number highlighting for selected cell
  &.selected.number-highlighted {
    background-color: var(--color-primary);
    border: 2px solid var(--color-primary);

    .main-number {
      color: var(--color-cell-selected-text);
    }

    .note {
      color: var(--color-cell-selected-text);
    }
  }

  .notes-grid {
    position: absolute;
    top: 2px;
    left: 2px;
    right: 2px;
    bottom: 2px;
    font-size: 11px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    color: var(--color-cell-notes);
    grid-gap: 2px;

    .note {
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: normal;
      border-radius: 2px;

      &.has-note {
        color: var(--color-cell-notes);
      }

      &.note-error {
        background-color: var(--color-danger);
        color: var(--color-cell-selected-text);
      }

      &.note-selected {
        background-color: var(--color-primary);
        color: var(--color-cell-selected-text);
      }
    }
  }
}
