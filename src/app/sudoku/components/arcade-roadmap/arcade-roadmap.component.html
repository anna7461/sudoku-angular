<div class="arcade-page">
  <!-- Header -->
  <div class="page-header">
    <button class="back-button" (click)="onBackToDashboard()">
      ‚Üê Back to Dashboard
    </button>
    <h1 class="page-title">Arcade Mode</h1>
    <p class="page-subtitle">Complete levels to unlock new challenges</p>
  </div>

  <!-- Hearts and Streaks Section -->
  <div class="hearts-streaks-section">
    <div class="hearts-container">
      <h3 class="section-title">Lives</h3>
      <div class="hearts-display">
        <div 
          *ngFor="let isFilled of getHeartsArray(); let i = index"
          class="heart"
          [class.filled]="isFilled"
          [class.empty]="!isFilled"
        >
          {{ isFilled ? '‚ù§Ô∏è' : 'üñ§' }}
        </div>
      </div>
    </div>
    
    <div class="streaks-container">
      <div class="streak-item">
        <span class="streak-label">Current Streak</span>
        <span class="streak-value">{{ currentStreak }}</span>
      </div>
      <div class="streak-item">
        <span class="streak-label">Best Streak</span>
        <span class="streak-value">{{ bestStreak }}</span>
      </div>
    </div>
  </div>

  <!-- Progress Stats -->
  <div class="progress-stats">
    <div class="stat-item">
      <span class="stat-label">Levels Completed</span>
      <span class="stat-value">{{ completedLevels }}/{{ levels.length }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Total Stars</span>
      <span class="stat-value">‚≠ê {{ totalStars }}</span>
    </div>
  </div>

  <!-- Linear Roadmap -->
  <div class="roadmap-container">
    <div class="roadmap-track">
      <div 
        *ngFor="let level of levels; trackBy: trackByLevelId; let i = index"
        class="roadmap-item"
        [class]="getLevelStatusClass(level)"
        [class.clickable]="canPlayLevel(level)"
        (click)="startLevel(level)"
      >
        <!-- Difficulty Section Header -->
        <div *ngIf="isFirstInDifficultySection(level)" class="difficulty-header">
          <h3 class="difficulty-title" [class]="getDifficultySectionClass(level)">
            {{ getDifficultySectionTitle(level) }}
          </h3>
        </div>

        <!-- Level Circle -->
        <div class="level-circle" [class]="getDifficultySectionClass(level)">
          <span class="level-number">{{ level.id }}</span>
          
          <!-- Status Indicators -->
          <div *ngIf="level.isCompleted" class="completion-indicator">
            <div class="stars">{{ getStarDisplay(level) }}</div>
          </div>
          
          <div *ngIf="!level.isUnlocked" class="lock-indicator">
            <span class="lock-icon">üîí</span>
          </div>
          
          <div *ngIf="level.isUnlocked && !level.isCompleted" class="play-indicator">
            <span class="play-icon">‚ñ∂Ô∏è</span>
          </div>
        </div>

        <!-- Level Info -->
        <div class="level-info">
          <h4 class="level-name">{{ level.name }}</h4>
          <div class="level-difficulty" [class]="getDifficultyColor(level.difficulty)">
            {{ getDifficultyIcon(level.difficulty) }} {{ level.difficulty }}
          </div>
          
          <!-- Best Time for Completed Levels -->
          <div *ngIf="level.isCompleted && level.bestTime" class="best-time">
            Best: {{ getBestTimeDisplay(level) }}
          </div>
        </div>

        <!-- Connection Line (except for last level) -->
        <div *ngIf="i < levels.length - 1" class="connection-line"></div>
      </div>
    </div>
  </div>

  <!-- Difficulty Legend -->
  <div class="difficulty-legend">
    <h3>Difficulty Levels</h3>
    <div class="legend-items">
      <div class="legend-item difficulty-easy">
        <span class="legend-icon">üòä</span>
        <span class="legend-text">Easy (Levels 1-5)</span>
      </div>
      <div class="legend-item difficulty-medium">
        <span class="legend-icon">ü§î</span>
        <span class="legend-text">Medium (Levels 6-10)</span>
      </div>
      <div class="legend-item difficulty-hard">
        <span class="legend-icon">üò∞</span>
        <span class="legend-text">Hard (Levels 11-15)</span>
      </div>
      <div class="legend-item difficulty-expert">
        <span class="legend-icon">üò±</span>
        <span class="legend-text">Expert (Levels 16-20)</span>
      </div>
    </div>
  </div>
</div>

